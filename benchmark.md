[WIP]

### v1 only, multi-scale

| backbone   | loss    | Private LB | Public LB |   oxford5k |   paris6k |   roxford5k-mapE |   roxford5k-mapM |   roxford5k-mapH |   rparis6k-mapE |   rparis6k-mapM |   rparis6k-mapH |
|-----------:|:--------|:-----------|:----------|-----------:|----------:|-----------------:|-----------------:|-----------------:|----------------:|----------------:|----------------:|
| ResNet-50  | softmax | 17.56      | 14.23     |      83.44 |     89.61 |            77.71 |            62.44 |            39.66 |           89.42 |           78.34 |           57.6  |
| ResNet-50  | arcface | 20.78      | 18.04     |      87.78 |     92.16 |            82.46 |            66.46 |            41.78 |           90.54 |           80.76 |           64.22 |
| ResNet-50  | cosface | 20.42      | 17.21     |      90.50 |     92.84 |            83.99 |            68.25 |            43.95 |           91.17 |           80.97 |           63.66 |
| ResNet-101 | softmax | 17.95      | 15.00     |      86.11 |     91.12 |            81.47 |            66.73 |            43.5  |           90.21 |           79.25 |           58.58 |
| ResNet-101 | arcface | 20.74      | 18.13     |      89.61 |     92.68 |            83.62 |            69.04 |            46.25 |           91.66 |           82.35 |           66.62 |
| ResNet-101 | cosface | 21.35      | 18.41     |      90.47 |     91.93 |            85.46 |            69.49 |            44.78 |           89.93 |           80.06 |           62.95 |


### v2 noisy

| loss    | Private LB | Public LB | oxford5k | paris6k | roxford5k-mapE | roxford5k-mapM | roxford5k-mapH | rparis6k-mapE | rparis6k-mapM | rparis6k-mapH |
|---------|------------|-----------|----------|---------|----------------|----------------|----------------|---------------|---------------|---------------|
| softmax |      22.20 |     19.70 | 86.61    | 93.37   | 83.3           | 69.31          | 45.65          | 90.46         | 84.74         | 70.78         |
| arcface |      29.20 |     26.84 | 92.15    | 95.74   | 89.71          | 77.0           | 56.59          | 93.66         | 89.25         | 77.35         |


### v2 clean

| freqthresh | verifythresh | # Labels | # Samples | Private LB | Public LB | oxford5k | paris6k | roxford5k-mapE | roxford5k-mapM | roxford5k-mapH | rparis6k-mapE | rparis6k-mapM | rparis6k-mapH |
|-----------:|-------------:|:---------:|:--------:|:-----------|:----------|---------:|--------:|---------------:|---------------:|---------------:|--------------:|--------------:|--------------:|
|         10 |           50 |   17036  |   430801  |      27.24 |     24.21 |    93.41 |   94.43 |          89.90 |          75.81 |          57.42 |         91.70 |         84.77 |         71.61 |
|         10 |           40 |   20519  |   540023  |      27.85 |     25.06 |    92.85 |   94.13 |          88.99 |          75.39 |          56.31 |         91.99 |         85.02 |         71.89 |
|         10 |           30 |   25974  |   725167  |      28.56 |     26.16 |    92.89 |   94.54 |          88.07 |          75.22 |          56.49 |         92.47 |         86.47 |         74.09 |
|         10 |           20 |   35084  |   1094854 |      29.23 |     26.29 |    90.86 |   96.06 |          87.81 |          75.13 |          56.35 |         93.03 |         88.12 |         76.52 |
|          9 |           50 |   19627  |   474639  |      27.30 |     24.81 |    93.97 |   95.06 |          88.57 |          75.37 |          55.46 |         92.08 |         85.45 |         72.07 |
|          9 |           40 |   23566  |   591315  |      28.42 |     24.85 |    92.50 |   94.85 |          87.44 |          75.04 |          57.52 |         92.18 |         86.25 |         73.94 |
|          9 |           30 |   29476  |   788086  |      28.92 |     26.40 |    92.24 |   95.40 |          89.58 |          76.20 |          57.64 |         92.81 |         86.95 |         74.20 |
|          9 |           20 |   39309  |   1175274 |      29.44 |     26.81 |    93.63 |   95.58 |          89.42 |          76.89 |          57.90 |         92.61 |         87.68 |         76.13 |
|          8 |           50 |   22894  |   527091  |      27.49 |     24.49 |    92.24 |   93.48 |          89.00 |          75.31 |          56.26 |         92.29 |         85.82 |         72.45 |
|          8 |           40 |   27170  |   651968  |      28.43 |     25.39 |    93.50 |   95.15 |          89.39 |          77.07 |          58.81 |         92.95 |         87.15 |         74.79 |
|          8 |           30 |   33581  |   860716  |      29.10 |     26.65 |    91.72 |   95.74 |          87.85 |          74.96 |          57.03 |         93.64 |         88.05 |         76.49 |
|          8 |           20 |   44347  |   1266995 |      29.64 |     26.84 |    93.37 |   95.57 |          90.21 |          76.47 |          56.07 |         92.75 |         87.72 |         75.95 |
|          7 |           50 |   26874  |   590613  |      27.65 |     25.09 |    91.56 |   95.30 |          87.24 |          73.75 |          55.15 |         93.05 |         87.14 |         74.72 |
|          7 |           40 |   31623  |   724124  |      28.61 |     25.76 |    92.08 |   95.45 |          88.47 |          76.42 |          58.95 |         93.06 |         87.68 |         75.88 |
|          7 |           30 |   38803  |   947508  |      29.19 |     26.49 |    91.86 |   95.59 |          89.65 |          76.76 |          58.85 |         92.93 |         87.75 |         76.21 |
|          7 |           20 |   50380  |   1373731 |      29.55 |     26.83 |    92.88 |   95.45 |          89.49 |          77.11 |          57.84 |         93.18 |         88.38 |         76.66 |
|          6 |           50 |   32205  |   669266  |      28.16 |     25.16 |    90.96 |   93.84 |          87.60 |          74.70 |          56.91 |         92.25 |         85.77 |         72.07 |
|          6 |           40 |   37343  |   813172  |      29.14 |     26.17 |    91.66 |   95.49 |          89.46 |          75.86 |          57.16 |         92.93 |         87.03 |         74.92 |
|          6 |           30 |   45306  |   1051510 |      29.51 |     26.77 |    92.94 |   96.05 |          90.31 |          77.09 |          57.78 |         92.94 |         88.19 |         76.47 |
|          6 |           20 |   57908  |   1500443 |      29.94 |     26.99 |    93.03 |   95.83 |          89.72 |          77.44 |          59.88 |         93.11 |         88.52 |         77.72 |
|          5 |           50 |   39129  |   770901  |      28.70 |     25.78 |    92.42 |   95.32 |          89.63 |          76.10 |          57.75 |         92.71 |         87.06 |         74.81 |
|          5 |           40 |   45059  |   926313  |      29.25 |     26.45 |    93.53 |   95.07 |          90.17 |          77.25 |          58.53 |         93.15 |         87.71 |         75.74 |
|          5 |           30 |   53862  |   1182169 |      29.88 |     27.42 |    92.22 |   95.76 |          89.42 |          77.30 |          59.94 |         93.40 |         88.20 |         77.15 |
|          5 |           20 |   67703  |   1654285 |      29.85 |     27.69 |    94.76 |   96.11 |          91.35 |          78.77 |          59.26 |         93.52 |         88.85 |         77.78 |
|          4 |           50 |   48878  |   906432  |      28.82 |     26.43 |    92.25 |   94.09 |          89.25 |          76.01 |          58.13 |         92.79 |         86.54 |         74.17 |
|          4 |           40 |   55509  |   1075641 |      29.60 |     26.83 |    92.60 |   95.89 |          89.46 |          77.33 |          58.89 |         93.24 |         88.16 |         76.62 |
|          4 |           30 |   65290  |   1350533 |      29.77 |     26.99 |    93.13 |   95.79 |          90.24 |          78.26 |          60.55 |         93.27 |         88.69 |         77.61 |
|          4 |           20 |   80238  |   1845023 |      29.79 |     27.33 |    92.42 |   96.01 |          89.52 |          77.45 |          58.91 |         93.52 |         89.19 |         78.50 |
|          3 |           50 |   63467  |   1103395 |      29.18 |     26.80 |    91.85 |   95.73 |          89.48 |          75.99 |          58.37 |         93.07 |         87.53 |         75.84 |
|          3 |           40 |   70712  |   1287020 |      29.59 |     27.25 |    92.82 |   95.88 |          90.00 |          77.16 |          58.81 |         93.53 |         88.69 |         77.68 |
|          3 |           30 |   81313  |   1580470 |      30.22 |     27.81 |    94.39 |   96.39 |          91.65 |          78.86 |          59.93 |         93.97 |         88.84 |         77.82 |
|          3 |           20 |   96595  |   2092670 |      29.95 |     27.21 |    93.81 |   96.36 |          91.23 |          79.47 |          60.32 |         93.41 |         89.83 |         79.61 |
|          2 |           50 |   86341  |   1414496 |      29.95 |     27.28 |    93.68 |   95.83 |          90.79 |          78.02 |          59.35 |         93.31 |         87.73 |         75.91 |
|          2 |           40 |   94045  |   1612453 |      30.19 |     27.62 |    92.90 |   96.28 |          90.66 |          78.80 |          61.60 |         94.01 |         89.07 |         77.79 |
|          2 |           30 |   104912 |   1920676 |      30.19 |     27.26 |    92.24 |   96.54 |          90.29 |          77.87 |          59.07 |         94.01 |         89.70 |         79.21 |
|          2 |           20 |   119880 |   2434203 |      29.81 |     27.13 |    93.67 |   96.02 |          91.25 |          79.00 |          59.75 |         93.83 |         89.72 |         79.46 |
|          1 |           50 |   130680 |   2039139 |      29.49 |     27.26 |    92.93 |   95.82 |          90.95 |          77.76 |          57.51 |         93.53 |         88.98 |         77.82 |
|          1 |           40 |   136745 |   2236781 |      29.99 |     27.25 |    93.00 |   96.05 |          90.56 |          77.58 |          58.17 |         93.75 |         89.40 |         78.52 |
|          1 |           30 |   144693 |   2528762 |      30.05 |     27.33 |    93.59 |   96.46 |          90.73 |          78.60 |          58.68 |         93.90 |         89.87 |         79.19 |
|          1 |           20 |   155052 |   2976795 |      29.78 |     27.55 |    94.01 |   96.39 |          91.62 |          79.12 |          58.97 |         93.90 |         90.02 |         79.38 |


### Summary

| Dataset       | loss    |    LB | roxford5k-mapM | roxford5k-mapH | rparis6k-mapM | rparis6k-mapH |
|---------------|---------|:------|---------------:|---------------:|--------------:|--------------:|
| v1            | softmax | 17.95 |          66.73 |          43.5  |         79.25 |         58.58 |
| v1            | arcface | 20.74 |          69.04 |          46.25 |         82.35 |         66.62 |
| v1 + v2       | softmax | 22.20 |          69.31 |          45.65 |         84.74 |         70.78 |
| v1 + v2       | arcface | 29.20 |          77.00 |          56.59 |         89.25 |         77.35 |
| v1 + v2-clean | arcface | 30.22 |          78.86 |          59.93 |         88.84 |         77.82 |


| | Private LB | Public LB |
|-|-|-|
| baseline  | 30.22 | 27.81 |
| + step1   | 33.79 | 30.91 |
| + step1+2 | 36.23 | 34.09 |


